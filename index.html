<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>F# Reflections</title>
    <meta name="description" content="Blog about F# and FP Programming">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    <link rel="apple-touch-icon-precomposed" href="/favicon/lattice-optic-illusion-152-204321.png" >
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="/favicon/lattice-optic-illusion-144-204321.png">
    <link rel="stylesheet" type="text/css"  href="//fonts.googleapis.com/css?family=Lato:400,400italic,700,700italic" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/default.min.css">
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/font-awesome.min.css" />
    <link rel="canonical" href="http://kcieslak.io/">
    <link rel="alternate" type="application/rss+xml" title="F# Reflections Feed" href="http://kcieslak.io/feed.xml">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
</head>
<body>
    <nav id="top" class="site-navigation">
        <div class="inner">
            <button id="menu-toggle" aria-expanded="false">Menu</button>
            <div class="nav-menu">
                <ul class="menu">
                
                  
                  
                  <li class="nav-current">
                    <a class="nav-current" href="/">Home</a>
                  </li>
                
                  
                  
                  <li class="">
                    <a class="" href="/about">About</a>
                  </li>
                
                  
                  
                  <li class="">
                    <a class="" href="/tags/">Archives</a>
                  </li>
                
                  
                  
                  <li class="">
                    <a class="" href="/2016">2016</a>
                  </li>
                
                </ul>
            </div><!-- .nav-menu -->
            <div class="subscribe-button">
                <a class="fa-feed square fill-horizontal" href="/feed.xml"><span class="screen-reader-text">RSS</span></a>
            </div><!-- .social-links -->
        </div><!-- .inner -->
    </nav><!-- .site-navigation -->
    <header class="site-header">
        <div class="inner">
            <h1 class="site-title"><a class="logo-text" href="/">F# Reflections</a></h1>
            <p class="site-description">Thoughts, stories and ideas.</p>
        </div><!-- .inner -->
    </header>
    <div class="site-content">
    <div class="inner">
        <main class="site-main"> 
            
            <article class="post">
                <header class="entry-header"> 
                    <div class="entry-header-wrap">
                        
                        <a href="/Introducing-Saturn-on-Functions" class="post-thumbnail"><img src="/images/posts/landscape_3.jpg" alt="Introducing Saturn on Functions "></a>
                        
                        <h2 class="entry-title"><a href="/Introducing-Saturn-on-Functions" rel="bookmark" title="Permanent Link to /Introducing-Saturn-on-Functions">Introducing Saturn on Functions</a></h2>
                    </div><!-- .entry-header-wrap -->
                    <div class="entry-meta">
                        by <span class="post-author">Krzysztof Cieslak</span> on <time class="published" datetime="2018-07-21">July 21, 2018</time>
                    </div><!-- .entry-meta -->
                </header><!-- .entry-header -->
                <div class="entry-content">
                    
                        <h1>Introduction</h1>

<p>Azure Functions is a service that provides serverless execution model while running code in the cloud. Serverless model is getting more and more popular nowadays, being great solution for building distributed, scalable, event-driven applications. However, those are not the only use cases - compute-on-demand story, automatic, low friction scalability and great pricing model means that Azure Functions can be used to host normal (REST-ish) APIs.</p>

<p>On the other hand, Saturn is new F# web framework that provides flexible, high level model of creating web applications using principles of functional programming and MVC architectural pattern. Main design goals of Saturn includes high level abstractions that lets developers focus on creating business code , and general developer experience.</p>

<h1>Saturn on Functions</h1>

<p>Today I want to introduce new extension to Saturn that adds ability to easily host Saturn controllers and routers inside Azure Functions HTTP triggers. Saturn is a library built on top of Giraffe and ASP.NET Core which means it can easily integrate with existing .Net ecosystem. HTTP triggers in Azure Functions as one of the input parameters are getting standard <code>HttpRequest</code> object that can be passed into Saturn’s <code>controller</code> or <code>router</code> (and any other <code>HttpHandler</code>).</p>

<h1>Computation Expression</h1>

<p>To reduce amount of boilerplate required to call any <code>HttpHandler</code> and provide, in Saturn’s spirit, opinionated way of hosting your controllers in Azure Functions we’ve created <code>Saturn.AzureFunctions</code> project that adds new computation expression  - <code> azureFunction</code></p>

<p>Example:</p>

<pre><code>let testCntl = controller {
    index (fun ctx -&gt; Controller.text ctx "Hello world")
    show (fun ctx id -&gt; id |&gt; sprintf "Hello world, %s" |&gt; Controller.text ctx)
}
let func log = azureFunction {
    host_prefix "/api"
    use_router testCntl
    logger log
    error_handler customErrorHandler
    not_found_handler customNotFoundHandler
}
</code></pre>

<p><code>azureFunction</code> CE provides set of custom operations that can be used to configure Azure Functions adapter:</p>
<ul>
  <li><code>host_prefix</code>  -  prefix of the routes used by Azure Functions. By default Functions are using <code>/api</code> prefix.</li>
  <li><code>use_router</code>  -  plugs <code>HttpHandler</code> that will be used. Setting it is required.</li>
  <li><code>logger </code> -  enables passing <code>TraceWriter</code> into your <code>HttpHandler</code> . It’s passed into your functions by <code>ctx.Items.["TraceWriter"]</code> property. It’s also used for logging error in default error handler.</li>
  <li><code>error_handler</code>  -  enables plugging custom error handler for unhandled exceptions.</li>
  <li><code>not_found_handler</code>  -  enables plugging custom handler for not matched requests.</li>
</ul>

<h1>Using it together</h1>

<p><code>azureFunction</code> CE is transformed into a function that accepts <code>HttpRequest</code> as an input and returns <code>Task&lt;HttpResponse&gt; </code> -  something that is understood by Functions runtime, and as such can be easily used in normal Azure Functions endpoint.</p>

<p>For example using <code>azureFunction</code> defined above would look like this:</p>

<pre><code>[&lt;FunctionName("HelloWorld")&gt;]
let helloWorld ([&lt;HttpTrigger(Extensions.Http.AuthorizationLevel.Anonymous, Route = "{route?}")&gt;]req: HttpRequest, log: TraceWriter) =
    func log req
</code></pre>

<h1>Summary</h1>

<p>In this post I’ve presented new way of hosting your Saturn applications - using Azure Functions. As you can see Saturn will provide easy to use, opinionated way to embed Saturn controllers or routers in Azure Functions providing great, alternative way of hosting your web applications. </p>

<p><code>Saturn.AzureFunctions</code> is currently still developed - if you’d like to check out current implementation, test it, or provide some feedback feel free to check this PR -  https://github.com/SaturnFramework/Saturn/pull/121</p>

                    
                    <p class="read-more"><a href="/Introducing-Saturn-on-Functions" class="more-link" title="read more">read more</a></p>
                </div><!-- .entry-content -->
                
                <footer class="entry-footer">
                    <div class="tag-links">
                        Tags: <a href="/tags/index.html#F%23" title="Pages tagged F#" rel="tag">F#</a><a href="/tags/index.html#Saturn" title="Pages tagged Saturn" rel="tag">Saturn</a><a href="/tags/index.html#Web" title="Pages tagged Web" rel="tag">Web</a><a href="/tags/index.html#Azure+Functions" title="Pages tagged Azure Functions" rel="tag">Azure Functions</a>
                    </div>
                </footer><!-- .entry-footer -->
                
            </article><!-- .post -->
            
            <article class="post">
                <header class="entry-header"> 
                    <div class="entry-header-wrap">
                        
                        <a href="/Magic-of-Saturn-controllers" class="post-thumbnail"><img src="/images/posts/landscape_10.jpg" alt="Magic of Saturn controllers "></a>
                        
                        <h2 class="entry-title"><a href="/Magic-of-Saturn-controllers" rel="bookmark" title="Permanent Link to /Magic-of-Saturn-controllers">Magic of Saturn controllers</a></h2>
                    </div><!-- .entry-header-wrap -->
                    <div class="entry-meta">
                        by <span class="post-author">Krzysztof Cieslak</span> on <time class="published" datetime="2018-07-20">July 20, 2018</time>
                    </div><!-- .entry-meta -->
                </header><!-- .entry-header -->
                <div class="entry-content">
                    
                        <h1>Introduction</h1>

<p><a href="https://saturnframework.org">Saturn</a> is new F# web framework that implements well know design pattern - MVC - in more functional way. Despite Saturn being fairly young project it’s getting more and more popular among F# community and industrial users. One of the main Saturn’s goals is to create high level abstractions that will enable developers to focus on writing domain, business code instead of focusing on creating correct routing for your application or setting right response headers. One of such abstractions, that I want to talk about today, is <code>controller</code>.</p>


                    
                    <p class="read-more"><a href="/Magic-of-Saturn-controllers" class="more-link" title="read more">read more</a></p>
                </div><!-- .entry-content -->
                
                <footer class="entry-footer">
                    <div class="tag-links">
                        Tags: <a href="/tags/index.html#F%23" title="Pages tagged F#" rel="tag">F#</a><a href="/tags/index.html#Saturn" title="Pages tagged Saturn" rel="tag">Saturn</a><a href="/tags/index.html#Web" title="Pages tagged Web" rel="tag">Web</a>
                    </div>
                </footer><!-- .entry-footer -->
                
            </article><!-- .post -->
            
            <article class="post">
                <header class="entry-header"> 
                    <div class="entry-header-wrap">
                        
                        <a href="/OSS-The-Story" class="post-thumbnail"><img src="/images/posts/landscape_4.jpg" alt="OSS and Community. The Story "></a>
                        
                        <h2 class="entry-title"><a href="/OSS-The-Story" rel="bookmark" title="Permanent Link to /OSS-The-Story">OSS and Community. The Story</a></h2>
                    </div><!-- .entry-header-wrap -->
                    <div class="entry-meta">
                        by <span class="post-author">Krzysztof Cieslak</span> on <time class="published" datetime="2018-02-23">February 23, 2018</time>
                    </div><!-- .entry-meta -->
                </header><!-- .entry-header -->
                <div class="entry-content">
                    
                        <h1>Disclaimer</h1>

<p>Before, we even start - this blog post will be different than others on the page. I usually write about some technical things, sometimes about open source and community based software, but I always try to be rather objective. And this post will be different. It’s totally subjective and personal… because it’s about me, and my story with F# Community.</p>


                    
                    <p class="read-more"><a href="/OSS-The-Story" class="more-link" title="read more">read more</a></p>
                </div><!-- .entry-content -->
                
                <footer class="entry-footer">
                    <div class="tag-links">
                        Tags: <a href="/tags/index.html#Open+Source" title="Pages tagged Open Source" rel="tag">Open Source</a><a href="/tags/index.html#Community" title="Pages tagged Community" rel="tag">Community</a><a href="/tags/index.html#F%23" title="Pages tagged F#" rel="tag">F#</a>
                    </div>
                </footer><!-- .entry-footer -->
                
            </article><!-- .post -->
            
            <article class="post">
                <header class="entry-header"> 
                    <div class="entry-header-wrap">
                        
                        <a href="/Reinventing-MVC-for-web-programming-with-F" class="post-thumbnail"><img src="/images/posts/landscape_9.jpg" alt="Reinventing MVC pattern for web programming with F# "></a>
                        
                        <h2 class="entry-title"><a href="/Reinventing-MVC-for-web-programming-with-F" rel="bookmark" title="Permanent Link to /Reinventing-MVC-for-web-programming-with-F">Reinventing MVC pattern for web programming with F#</a></h2>
                    </div><!-- .entry-header-wrap -->
                    <div class="entry-meta">
                        by <span class="post-author">Krzysztof Cieslak</span> on <time class="published" datetime="2018-01-25">January 25, 2018</time>
                    </div><!-- .entry-meta -->
                </header><!-- .entry-header -->
                <div class="entry-content">
                    
                        <h1>Introduction</h1>

<p>A couple of weeks ago, I’ve posted <a href="https://twitter.com/k_cieslak/status/944349420937793536">yet-another-controversial-tweet</a> - this time criticizing F# libraries for web programming and saying that “they focus on wrong problem”. In this post I’d like to expand this thought a bit, describe what is, in my opinion, problem with those libraries, and introduce a project that will try to fix those problems.</p>

<blockquote>
  <p>DISCLAIMER: In the original tweet I’ve mentioned three libraries - <a href="https://suave.io/">Suave</a>, <a href="https://github.com/giraffe-fsharp/Giraffe">Giraffe</a>, and <a href="https://freya.io/">Freya</a>. First of all, if we were to talk about all major F# web solutions we should also mention <a href="https://websharper.com/">WebSharper</a>. Secondly, my experience with Freya and WebSharper is fairly limited - I’ve never used any of them in commercial application - so in this post I won’t talk about them but focus on Suave and Giraffe</p>
</blockquote>

<blockquote>
  <p>DISCLAIMER 2: I really like both Suave and Giraffe - I’ve been using Suave for years in multiple commercial applications and I think it’s really good project. Also I’ve been investigating and testing Giraffe for last couple of months and I also believe it’s good project with a bright future.</p>
</blockquote>


                    
                    <p class="read-more"><a href="/Reinventing-MVC-for-web-programming-with-F" class="more-link" title="read more">read more</a></p>
                </div><!-- .entry-content -->
                
                <footer class="entry-footer">
                    <div class="tag-links">
                        Tags: <a href="/tags/index.html#F%23" title="Pages tagged F#" rel="tag">F#</a><a href="/tags/index.html#Saturn" title="Pages tagged Saturn" rel="tag">Saturn</a><a href="/tags/index.html#Web" title="Pages tagged Web" rel="tag">Web</a>
                    </div>
                </footer><!-- .entry-footer -->
                
            </article><!-- .post -->
            
            <article class="post">
                <header class="entry-header"> 
                    <div class="entry-header-wrap">
                        
                        <a href="/Path-to-community-based-OSS" class="post-thumbnail"><img src="/images/posts/landscape_8.jpg" alt="Path to Community based Open Source Software "></a>
                        
                        <h2 class="entry-title"><a href="/Path-to-community-based-OSS" rel="bookmark" title="Permanent Link to /Path-to-community-based-OSS">Path to Community based Open Source Software</a></h2>
                    </div><!-- .entry-header-wrap -->
                    <div class="entry-meta">
                        by <span class="post-author">Krzysztof Cieslak</span> on <time class="published" datetime="2017-06-12">June 12, 2017</time>
                    </div><!-- .entry-meta -->
                </header><!-- .entry-header -->
                <div class="entry-content">
                    
                        <h1>Introduction</h1>

<p>Open Source movement has changed the software development world as much as only few things before. Nowadays, it’s almost impossible to develop any project without using OSS - we can be sure that some parts of our stack are developed in the open - from the libraries we download from the package managers, through runtime, to compilers that we are using. Even most conservative, and not-so-long-time-ago actively hostile to OSS companies are now trying to embrace Open Source development.</p>

<p>But putting code in open by uploading to GitHub, using one of the licenses formally accepted by the <a href="https://opensource.org/">Open Source Initiative</a> is just first step. In my opinion, the real value of the Open Source is not just license, and publicly available code (although, those things are also valuable on their own) but rather possible change in governance model, collaboration with Community and embracing “OSS Culture”.</p>

<p>In this post I’ll describe different “stages of enlightenment” that company can go through in its path to the Open Source development model that will bring most value to both company and community.</p>


                    
                    <p class="read-more"><a href="/Path-to-community-based-OSS" class="more-link" title="read more">read more</a></p>
                </div><!-- .entry-content -->
                
                <footer class="entry-footer">
                    <div class="tag-links">
                        Tags: <a href="/tags/index.html#Open+Source" title="Pages tagged Open Source" rel="tag">Open Source</a><a href="/tags/index.html#Community" title="Pages tagged Community" rel="tag">Community</a>
                    </div>
                </footer><!-- .entry-footer -->
                
            </article><!-- .post -->
            
            
            <nav class="pagination">
                <h2 class="screen-reader-text">Posts navigation</h2>
                
                <span class="page-number">Page 1 of 3</span>
                
                <a href="/blog/page2/" class="older-posts fa-chevron-right square fill-horizontal"><span class="screen-reader-text">Older Posts</span></a>
                
            </nav><!-- .pagination -->
            
        </main><!-- .site-main -->
        <aside class="sidebar">

    
    <section class="widget widget-text">
        <h2 class="widget-title">About Krzysztof Cieslak</h2>
        <p>Krzysztof is a F# developer and consultant, open source contributor, conference speaker</p>

    </section><!-- .widget-text -->
    

    

    
    <section class="widget widget-text">
        <p><a href="http://lambdafactory.io" target="_blank"><img src="/images/banner.png" alt="Optional Banner Ad" /></a></p>
    </section><!-- .widget-text-->
    

    <section class="widget widget-recent-posts">
        <h2 class="widget-title">Latest Posts</h2>
        <ul class="recent-posts">
            
            <li class="recent-item"><a href="/Introducing-Saturn-on-Functions">Introducing Saturn on Functions</a> <span>July 21, 2018</span></li>
            
            <li class="recent-item"><a href="/Magic-of-Saturn-controllers">Magic of Saturn controllers</a> <span>July 20, 2018</span></li>
            
            <li class="recent-item"><a href="/OSS-The-Story">OSS and Community. The Story</a> <span>February 23, 2018</span></li>
            
            <li class="recent-item"><a href="/Reinventing-MVC-for-web-programming-with-F">Reinventing MVC pattern for web programming with F#</a> <span>January 25, 2018</span></li>
            
            <li class="recent-item"><a href="/Path-to-community-based-OSS">Path to Community based Open Source Software</a> <span>June 12, 2017</span></li>
            
        </ul><!-- .recent-posts -->
    </section><!-- .widget-recent-posts -->

    <!--Create a sorted array of tags-->
    
    
    <section class="widget widget-tags">
        <h2 class="widget-title">Tags</h2>
        <div class="tagcloud">
            
            <a href="/tags/#Azure+Functions">Azure Functions</a>
            
            <a href="/tags/#Community">Community</a>
            
            <a href="/tags/#F%23">F#</a>
            
            <a href="/tags/#FAKE">FAKE</a>
            
            <a href="/tags/#FSharp.Compiler.Services">FSharp.Compiler.Services</a>
            
            <a href="/tags/#Fable">Fable</a>
            
            <a href="/tags/#JS">JS</a>
            
            <a href="/tags/#Open+Source">Open Source</a>
            
            <a href="/tags/#Paket">Paket</a>
            
            <a href="/tags/#Saturn">Saturn</a>
            
            <a href="/tags/#Tooling">Tooling</a>
            
            <a href="/tags/#VS+Code">VS Code</a>
            
            <a href="/tags/#Web">Web</a>
            
            <a href="/tags/#Webpack">Webpack</a>
            
        </div><!-- .tagcloud -->
    </section><!-- .widget -->

    <section class="widget widget-text">
        <h2 class="widget-title">Contact me</h2>
        
        <a href="https://twitter.com/k_cieslak" class="fa-twitter square fill-horizontal"><span class="screen-reader-text">Twitter</span></a>
        
        
        
        
        <a href="https://github.com/Krzysztof-Cieslak" class="fa-github-alt square fill-horizontal"><span class="screen-reader-text">GitHub</span></a>
        
        
        <a href="https://gitlab.com/Krzysztof-Cieslak" class="fa-gitlab square fill-horizontal"><span class="screen-reader-text">GitHub</span></a>
        
        
        
        
        
        
        
        
        <a href="mailto:krzysztof_cieslak@windowslive.com" class="fa-envelope square fill-horizontal"><span class="screen-reader-text">E-Mail</span></a>
        
    </section><!-- .widget-text -->


</aside><!-- .sidebar -->

    </div><!-- .inner -->
</div><!-- .site-content -->

    <footer class="site-footer">
    <div class="inner">
        <div class="social-links">
            
            <a href="https://twitter.com/k_cieslak" class="fa-twitter square fill-horizontal"><span class="screen-reader-text">Twitter</span></a>
            
            
            
            
            <a href="https://github.com/Krzysztof-Cieslak" class="fa-github-alt square fill-horizontal"><span class="screen-reader-text">GitHub</span></a>
            
            
            <a href="https://gitlab.com/Krzysztof-Cieslak" class="fa-gitlab square fill-horizontal"><span class="screen-reader-text">GitHub</span></a>
            
            
            
            
            
            
            
            
            <a href="mailto:krzysztof_cieslak@windowslive.com" class="fa-envelope square fill-horizontal"><span class="screen-reader-text">E-Mail</span></a>
            
            <a class="fa-feed square fill-horizontal" href="/feed.xml"><span class="screen-reader-text">RSS</span></a>
        </div><!-- .social-links -->
        <div class="site-info">
            &copy; <a href="/">Krzysztof Cieslak</a> all rights reserved. <br />Powered by <a target="_blank" href="https://jekyllrb.com/">Jekyll</a>. BlogInn theme by <a target="_blank" href="http://justgoodthemes.com/">JustGoodThemes</a>
            <a href="#top" id="top-link" class="fa-chevron-up top-link square fill-horizontal"><span class="screen-reader-text">Back to the top</span></a>
        </div><!-- .site-info -->
    </div><!-- .inner -->
</footer><!-- .site-footer -->


    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/fsharp.min.js"></script>
    <script type="text/javascript" src="/js/plugins.js"></script>
    <script type="text/javascript" src="/js/custom.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <!-- Asynchronous Google Analytics snippet -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-74514389-1', 'auto');
    ga('require', 'linkid', 'linkid.js');
    ga('send', 'pageview');
    </script>
    
</body>
</html>
